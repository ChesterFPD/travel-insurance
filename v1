<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Travel Insurance Comparison ‚Äì Prototype</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --cta: #005b73;
      --cta-hover: #00485a;
      --brand-orange: #f97316;
      --pill-blue: #a7f3f0;
      --pill-blue-text: #0f766e;
      --promo-green: #e7f6e9;
      --muted: #6b7280;
      --card-border: #e5e7eb;
    }

    .cta {
      background-color: var(--cta);
      color: #ffffff;
      font-weight: 600;
      font-size: 16px;
      line-height: 24px;
      border-radius: 0.5rem;
      padding: 0.6rem 1.25rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: background-color 0.2s ease;
      white-space: nowrap;
    }
    .cta:hover { background-color: var(--cta-hover); }
    .cta::after { content: "‚Üí"; font-weight: 700; }

    .more-info { color: var(--brand-orange); text-decoration: underline; font-size: 14px; font-weight: 500; }
    th.sticky-col, td.sticky-col { position: sticky; left: 0; background: #f9fafb; z-index: 10; }
    th.sticky-col { z-index: 20; }
    table, th, td { font-size: 16px; line-height: 24px; }
    th, td { width: auto; min-width: 250px; }

    #compare-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #ffffff;
      border-top: 1px solid var(--card-border);
      box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
      padding: 0.75rem 1rem;
      display: none;
      justify-content: space-between;
      align-items: center;
      z-index: 50;
    }
    .chip { background:#eef2ff; color:#3730a3; font-weight:600; font-size:12px; padding:.25rem .5rem; border-radius:999px; }

    /* Popup modal */
    #cmp-overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:100; }
    #cmp-modal { display:none; position:fixed; inset:0; z-index:110; align-items:center; justify-content:center; }
    #cmp-modal .modal-card { background:#fff; border-radius:0.75rem; max-width:95%; max-height:90%; overflow:auto; padding:1rem; }
    #cmp-body { overflow-x:auto }
    .close-btn { border:none; background:none; font-size:1.25rem; cursor:pointer; }
    .cmp-sticky { position:sticky; left:0; background:#fff; z-index:1; box-shadow:inset -1px 0 0 #eee }
    .cmp-sticky.cmp-head { z-index:2; background:#f3f4f6 }

    /* Mobile optimizations */
    @media (max-width:640px){
      #compare-bar{flex-direction:column;align-items:stretch;gap:.5rem;padding-bottom:calc(0.75rem + env(safe-area-inset-bottom))}
      #compare-btn{width:100%}
      #selected-products{line-height:1.3}
      #cmp-modal{align-items:flex-end}
      #cmp-modal .modal-card{width:100vw;height:92vh;max-width:100%;max-height:none;border-radius:.75rem .75rem 0 0;padding:.75rem}
      #cmp-modal h2{font-size:1.125rem}
      #cmp-modal table{table-layout:auto;min-width:700px} /* narrower attributes column on mobile */
      #cmp-modal th:first-child,#cmp-modal td:first-child{min-width:160px;max-width:180px}
      #cmp-modal th,#cmp-modal td{font-size:14px;line-height:20px;padding:.75rem;}
      #cmp-modal tfoot td{padding-top:1rem;}
      #cmp-modal tfoot td a.cta{display:block;width:100%;margin:0 auto;margin-bottom:.5rem}
      /* Product cards */
      .product-card{padding:1rem}
      .product-card h2{font-size:1rem;line-height:1.4}
      .product-card .text-2xl{font-size:1.25rem}
      .product-card .cta{width:100%;margin-top:.5rem}
      .product-card .flex.items-center.justify-between{flex-direction:column;align-items:flex-start;gap:.5rem}
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 leading-relaxed">
  <main class="mx-auto max-w-6xl p-6">
    <header class="mb-6">
      <h1 class="text-3xl font-bold">Travel Insurance Comparison</h1>
      <p class="text-lg text-gray-600">Compare coverage details across Starr, HL Assurance and MSIG travel insurance plans.</p>
    </header>

    <!-- Product Cards -->
    <div class="grid grid-cols-1 gap-4 mb-6">
      <!-- STARR -->
      <article class="product-card border border-gray-200 rounded-lg bg-white shadow-sm text-sm relative">
        <div class="absolute top-3 right-3 flex items-center gap-1">
          <input type="checkbox" id="compare-starr" class="compare-check w-4 h-4" data-col="1" data-name="Starr TraveLead Bronze">
          <label for="compare-starr" class="text-sm font-medium">Compare</label>
        </div>
        <div class="bg-green-100 rounded-t-lg px-3 py-1 font-semibold text-xs">üî• Get JISULIFE Fan + up to $70 vouchers upon checkout</div>
        <div class="p-4">
          <div class="flex items-center gap-3 mb-2">
            <img class="h-6" src="https://www.starrcompanies.com/Sitefinity/WebsiteTemplates/StarrCompanies/App_Themes/StarrCompanies/Images/logo.png" alt="Starr" />
            <h2 class="text-lg font-bold">Starr TraveLead Comprehensive with COVID-19 Coverage (Bronze Plan)</h2>
          </div>
          <div class="flex items-center justify-between">
            <div class="text-2xl font-bold">S$ 18.53</div>
            <button class="cta bg-orange-500">Express Checkout</button>
            <div class="text-sm"><span class="line-through text-gray-400">S$ 46.33</span> <span class="bg-teal-100 text-teal-700 px-2 py-0.5 rounded-full text-xs font-semibold">60% off</span></div>
          </div>
        </div>
      </article>

      <!-- HLAS -->
      <article class="product-card border border-gray-200 rounded-lg bg-white shadow-sm text-sm relative">
        <div class="absolute top-3 right-3 flex items-center gap-1">
          <input type="checkbox" id="compare-hlas" class="compare-check w-4 h-4" data-col="2" data-name="HLAS Protect360 Basic">
          <label for="compare-hlas" class="text-sm font-medium">Compare</label>
        </div>
        <div class="bg-green-100 rounded-t-lg px-3 py-1 font-semibold text-xs">üéÅ Get JISULIFE Fan + up to $50 vouchers upon checkout</div>
        <div class="p-4">
          <div class="flex items-center gap-3 mb-2">
            <img class="h-6" src="https://www.hlas.com.sg/themes/custom/hlassurance/logo.png" alt="HLAS" />
            <h2 class="text-lg font-bold">HLAS Travel Protect360 Basic</h2>
          </div>
          <div class="flex items-center justify-between">
            <div class="text-2xl font-bold">S$ 20.00</div>
            <button class="cta bg-orange-500">Express Checkout</button>
            <div class="text-sm"><span class="line-through text-gray-400">S$ 50.00</span> <span class="bg-teal-100 text-teal-700 px-2 py-0.5 rounded-full text-xs font-semibold">60% off</span></div>
          </div>
        </div>
      </article>

      <!-- MSIG -->
      <article class="product-card border border-gray-200 rounded-lg bg-white shadow-sm text-sm relative">
        <div class="absolute top-3 right-3 flex items-center gap-1">
          <input type="checkbox" id="compare-msig" class="compare-check w-4 h-4" data-col="3" data-name="MSIG Standard Plan">
          <label for="compare-msig" class="text-sm font-medium">Compare</label>
        </div>
        <div class="bg-green-100 rounded-t-lg px-3 py-1 font-semibold text-xs">‚úÖ Get JISULIFE Fan + up to $50 vouchers upon checkout</div>
        <div class="p-4">
          <div class="flex items-center gap-3 mb-2">
            <img class="h-6" src="https://www.msig.com.sg/themes/custom/msig/logo.png" alt="MSIG" />
            <h2 class="text-lg font-bold">MSIG Standard Plan</h2>
          </div>
          <div class="flex items-center justify-between">
            <div class="text-2xl font-bold">S$ 19.40</div>
            <button class="cta bg-orange-500">Express Checkout</button>
            <div class="text-sm"><span class="line-through text-gray-400">S$ 48.50</span> <span class="bg-teal-100 text-teal-700 px-2 py-0.5 rounded-full text-xs font-semibold">60% off</span></div>
          </div>
        </div>
      </article>
    </div>

    <!-- Hidden source table for popup -->
    <table id="source-compare" class="hidden">
      <thead>
        <tr>
          <th>List of Attributes</th>
          <th>Starr TraveLead Comprehensive (Bronze Plan)</th>
          <th>HLAS Travel Protect360 Basic</th>
          <th>MSIG Standard Plan</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Price</td><td>$50</td><td>$70</td><td>$90</td></tr>
        <tr><td>Rewards</td><td>5% cashback</td><td>Air miles</td><td>Hotel vouchers</td></tr>
        <tr><td>Trip cancellation</td><td>$2,000</td><td>$5,000</td><td>$10,000</td></tr>
        <tr><td>Loss of baggage</td><td>$1,000</td><td>$2,000</td><td>$3,000</td></tr>
        <tr><td>Overseas medical expenses</td><td>$100,000</td><td>$200,000</td><td>$300,000</td></tr>
        <tr><td>Medical expenses in Singapore</td><td>$10,000</td><td>$15,000</td><td>$20,000</td></tr>
      </tbody>
      <tfoot>
        <tr><td></td><td><a href="#" class="cta">Buy Now</a></td><td><a href="#" class="cta">Buy Now</a></td><td><a href="#" class="cta">Buy Now</a></td></tr>
      </tfoot>
    </table>

    <!-- Comparison Modal -->
    <div id="cmp-overlay"></div>
    <div id="cmp-modal">
      <div class="modal-card">
        <div class="flex justify-between items-center mb-3 sticky top-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 z-10 border-b border-gray-100 pb-2">
          <h2 class="text-xl font-bold">Compare Plans</h2>
          <button id="cmp-close" class="close-btn">‚úï</button>
        </div>
        <div id="cmp-body"></div>
      </div>
    </div>

    <!-- Comparison Bar -->
    <div id="compare-bar" class="flex">
      <div id="selected-products" class="text-sm font-medium text-gray-700">0 products selected</div>
      <button id="compare-btn" class="cta disabled:opacity-50 disabled:cursor-not-allowed" disabled>Compare Now</button>
    </div>
  </main>

  <script>
    const checkboxes = document.querySelectorAll('.compare-check');
    const compareBar = document.getElementById('compare-bar');
    const selectedProducts = document.getElementById('selected-products');
    const compareBtn = document.getElementById('compare-btn');
    const overlay = document.getElementById('cmp-overlay');
    const modal = document.getElementById('cmp-modal');
    const modalBody = document.getElementById('cmp-body');
    const closeBtn = document.getElementById('cmp-close');

    checkboxes.forEach(cb => {
      cb.addEventListener('change', () => {
        const checked = document.querySelectorAll('.compare-check:checked');
        if (checked.length >= 2) {
          compareBar.style.display = 'flex';
          const names = Array.from(checked).map(x => `<span class=\"chip\">${x.dataset.name}</span>`);
          selectedProducts.innerHTML = names.join(' ');
          // allow wrapping to next line
          selectedProducts.style.display = 'flex';
          selectedProducts.style.flexWrap = 'wrap';
          selectedProducts.style.gap = '0.25rem';
          compareBtn.disabled = false;
        } else {
          compareBar.style.display = 'none';
          selectedProducts.textContent = '0 products selected';
          compareBtn.disabled = true;
        }
      });
    });

    function openModal(){ overlay.style.display='block'; modal.style.display='flex'; document.body.style.overflow='hidden'; }
    function closeModal(){ overlay.style.display='none'; modal.style.display='none'; document.body.style.overflow=''; modalBody.innerHTML=''; }
    overlay.addEventListener('click', closeModal);
    closeBtn.addEventListener('click', closeModal);

    function buildCompareTable(colIdx){
      const src = document.getElementById('source-compare');
      const tbl = document.createElement('table');
      tbl.className = 'w-full';

      const thead = document.createElement('thead');
      const hr = document.createElement('tr');
      hr.className = 'bg-gray-100 text-left';
      const attrHead = src.tHead.rows[0].cells[0].cloneNode(true);
      attrHead.classList.add('cmp-sticky','cmp-head');
      hr.appendChild(attrHead);
      colIdx.forEach(i => { const n = src.tHead.rows[0].cells[i].cloneNode(true); n.classList.add('cmp-col'); hr.appendChild(n); });
      thead.appendChild(hr);
      tbl.appendChild(thead);

      const tbody = document.createElement('tbody');
      [...src.tBodies[0].rows].forEach(r => {
        const tr = document.createElement('tr');
        tr.className = 'border-t';
        const attrCell = r.cells[0].cloneNode(true);
        attrCell.classList.add('cmp-sticky');
        tr.appendChild(attrCell);
        colIdx.forEach(i => { const n = r.cells[i].cloneNode(true); n.classList.add('cmp-col'); tr.appendChild(n); });
        tbody.appendChild(tr);
      });
      tbl.appendChild(tbody);

      if (src.tFoot) {
        const tf = document.createElement('tfoot');
        [...src.tFoot.rows].forEach(r => {
          const tr = document.createElement('tr');
          const attrCell = r.cells[0].cloneNode(true);
          attrCell.classList.add('cmp-sticky');
          tr.appendChild(attrCell);
          colIdx.forEach(i => { const n = r.cells[i].cloneNode(true); n.classList.add('cmp-col'); tr.appendChild(n); });
          tf.appendChild(tr);
        });
        tbl.appendChild(tf);
      }
      return tbl;
    }

    compareBtn.addEventListener('click', () => {
      const checked = Array.from(document.querySelectorAll('.compare-check:checked'));
      if (checked.length < 2) return;
      const colIdx = checked.map(cb => parseInt(cb.dataset.col, 10));
      const table = buildCompareTable(colIdx);
      modalBody.innerHTML = '';
      modalBody.appendChild(table);
      openModal();
    });
  </script>
</body>
</html>
